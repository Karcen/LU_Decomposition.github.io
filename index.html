<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LUåˆ†è§£äº¤äº’å¼å¯è§†åŒ–</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #f5f7fb;
  --surface: #ffffff;
  --surface2: #eef1f8;
  --accent: #c2660a;
  --accent2: #2556c4;
  --accent3: #0e7a58;
  --accent4: #c42b2b;
  --text: #1a2236;
  --text-dim: #5a6580;
  --border: #d8dde8;
  --lower-color: #c2660a;
  --upper-color: #2556c4;
  --result-color: #0e7a58;
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Noto Sans SC', sans-serif;
  line-height: 1.8;
}
.container { max-width:1100px; margin:0 auto; padding:20px; }
.hero { text-align:center; padding:70px 20px 50px; }
.hero h1 {
  font-family:'Playfair Display',serif;
  font-size:clamp(2.4rem,5vw,3.8rem);
  font-weight:900;
  background:linear-gradient(135deg,var(--accent),var(--accent2),var(--accent3));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  margin-bottom:12px;
}
.hero .subtitle { font-size:1.05rem; color:var(--text-dim); max-width:600px; margin:0 auto; }
.section {
  margin:50px 0; padding:36px;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow:0 2px 16px rgba(0,0,0,0.04);
  position:relative; overflow:hidden;
}
.section::before {
  content:''; position:absolute; top:0; left:0; right:0; height:3px;
  background:linear-gradient(90deg,var(--accent),var(--accent2),var(--accent3));
}
.section-number {
  display:inline-block;
  font-family:'JetBrains Mono',monospace;
  font-size:0.72rem; font-weight:700;
  color:var(--accent); background:rgba(194,102,10,0.08);
  border:1px solid rgba(194,102,10,0.2);
  padding:3px 12px; border-radius:20px;
  margin-bottom:14px; letter-spacing:2px; text-transform:uppercase;
}
.section h2 { font-size:1.5rem; font-weight:700; margin-bottom:18px; }
.section p { margin-bottom:14px; color:var(--text-dim); font-size:0.93rem; }
.hl { color:var(--accent); font-weight:600; }
.hl-b { color:var(--accent2); font-weight:600; }
.hl-g { color:var(--accent3); font-weight:600; }
.equation {
  font-family:'JetBrains Mono',monospace;
  text-align:center; font-size:1.15rem;
  padding:18px; background:var(--surface2); border-radius:10px;
  margin:14px 0; letter-spacing:1px;
}
.equation .L { color:var(--lower-color); }
.equation .U { color:var(--upper-color); }
.equation .A { color:var(--result-color); }
.matrix-display {
  display:flex; align-items:center; justify-content:center;
  gap:14px; margin:24px 0; flex-wrap:wrap;
  font-family:'JetBrains Mono',monospace;
}
.matrix {
  display:inline-flex; flex-direction:column;
  position:relative; padding:8px 14px;
}
.matrix::before,.matrix::after {
  content:''; position:absolute; top:0; bottom:0; width:3px; border-radius:2px;
}
.matrix::before { left:0; } .matrix::after { right:0; }
.matrix.lower::before,.matrix.lower::after { background:var(--lower-color); }
.matrix.upper::before,.matrix.upper::after { background:var(--upper-color); }
.matrix.result::before,.matrix.result::after { background:var(--result-color); }
.matrix.plain::before,.matrix.plain::after { background:var(--text-dim); }
.matrix-row { display:flex; gap:10px; }
.matrix-cell {
  width:46px; height:38px; display:flex; align-items:center; justify-content:center;
  font-size:0.92rem; font-weight:600; border-radius:5px;
}
.matrix-cell.zero { color:#bfc6d4; }
.matrix-cell.diag { background:rgba(0,0,0,0.03); }
.matrix-cell.hi { background:rgba(194,102,10,0.1); color:var(--accent); }
.op-symbol { font-size:1.4rem; font-weight:700; color:var(--text-dim); padding:0 2px; }
.matrix-label { text-align:center; font-size:0.78rem; font-weight:600; margin-top:7px; letter-spacing:1px; text-transform:uppercase; }
.matrix-label.ll { color:var(--lower-color); }
.matrix-label.ul { color:var(--upper-color); }
.matrix-label.rl { color:var(--result-color); }
.controls { display:flex; flex-wrap:wrap; gap:12px; margin:18px 0; align-items:center; }
.cg { display:flex; align-items:center; gap:7px; }
.cg label { font-size:0.84rem; color:var(--text-dim); font-weight:500; }
input[type="number"] {
  font-family:'JetBrains Mono',monospace;
  background:var(--surface2); border:1px solid var(--border);
  color:var(--text); padding:7px 10px; border-radius:7px;
  font-size:0.88rem; width:68px; text-align:center;
}
input[type="number"]:focus { outline:none; border-color:var(--accent); }
input[type="range"] {
  width:160px; -webkit-appearance:none; height:6px;
  border-radius:3px; background:var(--border); cursor:pointer;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance:none; width:18px; height:18px;
  border-radius:50%; background:var(--accent); cursor:pointer;
  box-shadow:0 1px 4px rgba(0,0,0,0.15);
}
.sv { font-family:'JetBrains Mono',monospace; color:var(--accent); font-weight:700; min-width:34px; text-align:center; }
.btn {
  font-family:'Noto Sans SC',sans-serif;
  background:linear-gradient(135deg,var(--accent),#a85508);
  color:#fff; border:none; padding:9px 22px; border-radius:8px;
  font-size:0.84rem; font-weight:700; cursor:pointer; transition:all 0.2s;
}
.btn:hover { transform:translateY(-1px); box-shadow:0 4px 14px rgba(194,102,10,0.25); }
.btn.sec { background:var(--surface2); color:var(--text); border:1px solid var(--border); }
.btn.sec:hover { border-color:var(--accent); }
.btn.blue { background:linear-gradient(135deg,var(--accent2),#1a3fa0); }
.btn.green { background:linear-gradient(135deg,var(--accent3),#0a5e44); }
.info {
  background:var(--surface2); border-left:3px solid var(--accent);
  padding:14px 18px; border-radius:0 8px 8px 0; margin:18px 0; font-size:0.9rem;
}
.info.blue { border-left-color:var(--accent2); }
.info.green { border-left-color:var(--accent3); }
.info.red { border-left-color:var(--accent4); }
.info strong { display:block; margin-bottom:3px; }
.tabs { display:flex; gap:3px; margin-bottom:22px; background:var(--surface2); border-radius:10px; padding:3px; overflow-x:auto; }
.tab {
  padding:9px 18px; font-size:0.84rem; font-weight:600;
  color:var(--text-dim); background:transparent; border:none;
  border-radius:8px; cursor:pointer; transition:all 0.2s;
  white-space:nowrap; font-family:'Noto Sans SC',sans-serif;
}
.tab.active { background:var(--accent); color:#fff; }
.tab:hover:not(.active) { color:var(--text); background:rgba(0,0,0,0.04); }
.tc { display:none; } .tc.active { display:block; }
.sf { display:flex; gap:14px; margin:22px 0; flex-wrap:wrap; }
.sc {
  flex:1; min-width:190px; background:var(--surface2);
  border:1px solid var(--border); border-radius:11px;
  padding:18px; text-align:center; transition:all 0.3s;
}
.sc:hover { border-color:var(--accent); transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.06); }
.sc .sn {
  display:inline-block; width:30px; height:30px;
  background:var(--accent); color:#fff; border-radius:50%;
  line-height:30px; font-weight:700; font-size:0.82rem; margin-bottom:8px;
}
.sc h4 { font-size:0.92rem; margin-bottom:6px; }
.sc p { font-size:0.8rem; color:var(--text-dim); margin:0; }
.gs {
  padding:14px; margin:10px 0; background:var(--surface2);
  border-radius:10px; border:1px solid var(--border);
}
.gs.act { border-color:var(--accent); box-shadow:0 0 16px rgba(194,102,10,0.08); }
.gs h4 { font-size:0.88rem; color:var(--accent); margin-bottom:7px; }
.cb {
  font-family:'JetBrains Mono',monospace;
  background:var(--surface2); border:1px solid var(--border);
  border-radius:8px; padding:14px; font-size:0.82rem;
  overflow-x:auto; margin:10px 0; line-height:1.65; color:var(--text-dim);
  white-space:pre-wrap;
}
.ct { width:100%; border-collapse:collapse; margin:18px 0; font-size:0.86rem; }
.ct th { background:var(--surface2); padding:11px 14px; text-align:left; font-weight:600; color:var(--accent); border-bottom:2px solid var(--border); }
.ct td { padding:11px 14px; border-bottom:1px solid var(--border); color:var(--text-dim); }
.ct tr:hover td { background:rgba(0,0,0,0.015); }
.tag { display:inline-block; padding:2px 10px; border-radius:12px; font-size:0.73rem; font-weight:700; }
.tag.y { background:rgba(14,122,88,0.1); color:var(--accent3); }
.tag.n { background:rgba(196,43,43,0.1); color:var(--accent4); }
.two-col { display:grid; grid-template-columns:1fr 1fr; gap:18px; margin:14px 0; }
@media(max-width:768px) {
  .section { padding:22px 14px; }
  .matrix-cell { width:34px; height:30px; font-size:0.78rem; }
  .matrix-row { gap:5px; }
  .sf { flex-direction:column; }
  .two-col { grid-template-columns:1fr; }
  canvas { width:100%!important; height:auto!important; }
}
.viz { position:relative; background:var(--surface2); border-radius:12px; overflow:hidden; margin:18px 0; border:1px solid var(--border); }
canvas { display:block; margin:0 auto; }
</style>
</head>
<body>
<div class="container">

<div class="hero">
  <h1>LU åˆ†è§£</h1>
  <p class="subtitle">ä¸ºä»€ä¹ˆå°†çŸ©é˜µåˆ†è§£ä¸ºä¸‹ä¸‰è§’ Ã— ä¸Šä¸‰è§’ï¼Ÿäº¤äº’å¼å¯è§†åŒ–å¸¦ä½ ä»ç›´è§‰åˆ°æœ¬è´¨ç†è§£æ¯ä¸€æ­¥ã€‚</p>
</div>

<!-- ===== 1 ===== -->
<div class="section">
  <span class="section-number">ç¬¬ä¸€ç« </span>
  <h2>ä»€ä¹ˆæ˜¯ LU åˆ†è§£ï¼Ÿ</h2>
  <p>LUåˆ†è§£æ˜¯å°†ä¸€ä¸ªæ–¹é˜µ <span class="hl-g">A</span> åˆ†è§£ä¸º<span class="hl">ä¸‹ä¸‰è§’çŸ©é˜µ L</span>ï¼ˆLowerï¼‰å’Œ<span class="hl-b">ä¸Šä¸‰è§’çŸ©é˜µ U</span>ï¼ˆUpperï¼‰çš„ä¹˜ç§¯ï¼š</p>
  <div class="equation"><span class="A">A</span> = <span class="L">L</span> Â· <span class="U">U</span></div>
  <div class="matrix-display">
    <div><div class="matrix result">
      <div class="matrix-row"><div class="matrix-cell">2</div><div class="matrix-cell">1</div><div class="matrix-cell">1</div></div>
      <div class="matrix-row"><div class="matrix-cell">4</div><div class="matrix-cell">3</div><div class="matrix-cell">3</div></div>
      <div class="matrix-row"><div class="matrix-cell">8</div><div class="matrix-cell">7</div><div class="matrix-cell">9</div></div>
    </div><div class="matrix-label rl">A</div></div>
    <div class="op-symbol">=</div>
    <div><div class="matrix lower">
      <div class="matrix-row"><div class="matrix-cell diag">1</div><div class="matrix-cell zero">0</div><div class="matrix-cell zero">0</div></div>
      <div class="matrix-row"><div class="matrix-cell hi">2</div><div class="matrix-cell diag">1</div><div class="matrix-cell zero">0</div></div>
      <div class="matrix-row"><div class="matrix-cell hi">4</div><div class="matrix-cell hi">3</div><div class="matrix-cell diag">1</div></div>
    </div><div class="matrix-label ll">Lï¼ˆä¸‹ä¸‰è§’ï¼‰</div></div>
    <div class="op-symbol">Ã—</div>
    <div><div class="matrix upper">
      <div class="matrix-row"><div class="matrix-cell hi">2</div><div class="matrix-cell hi">1</div><div class="matrix-cell hi">1</div></div>
      <div class="matrix-row"><div class="matrix-cell zero">0</div><div class="matrix-cell hi">1</div><div class="matrix-cell hi">1</div></div>
      <div class="matrix-row"><div class="matrix-cell zero">0</div><div class="matrix-cell zero">0</div><div class="matrix-cell hi">2</div></div>
    </div><div class="matrix-label ul">Uï¼ˆä¸Šä¸‰è§’ï¼‰</div></div>
  </div>
  <div class="info">
    <strong>ğŸ”‘ å…³é”®ç‰¹å¾</strong>
    <span class="hl">L</span>ï¼šå¯¹è§’çº¿å…¨ä¸º1ï¼Œä¸Šæ–¹å…¨ä¸º0ï¼Œéé›¶å…ƒç´ åœ¨å·¦ä¸‹æ–¹ ï½œ
    <span class="hl-b">U</span>ï¼šéé›¶å…ƒç´ åœ¨å³ä¸Šæ–¹ï¼ˆå«å¯¹è§’çº¿ï¼‰ï¼Œå·¦ä¸‹æ–¹å…¨ä¸º0
  </div>
</div>

<!-- ===== 2 ===== -->
<div class="section" id="sec2">
  <span class="section-number">ç¬¬äºŒç« </span>
  <h2>ä¸ºä»€ä¹ˆæ˜¯ L Ã— Uï¼Œè€Œä¸æ˜¯ U Ã— Lï¼Ÿ</h2>
  <p>ç­”æ¡ˆè—åœ¨<span class="hl">é«˜æ–¯æ¶ˆå…ƒæ³•</span>ä¸­â€”â€”LUåˆ†è§£å°±æ˜¯å¯¹é«˜æ–¯æ¶ˆå…ƒçš„ã€Œè®°å½•ã€ã€‚</p>
  <div class="tabs" id="tabs-gauss">
    <button class="tab active" data-g="gauss" data-i="0">é«˜æ–¯æ¶ˆå…ƒè¿‡ç¨‹</button>
    <button class="tab" data-g="gauss" data-i="1">ä¸ºä»€ä¹ˆæ˜¯ LÃ—U</button>
    <button class="tab" data-g="gauss" data-i="2">UÃ—L è¡Œä¸è¡Œï¼Ÿ</button>
  </div>
  <div class="tc active" data-g="gauss" data-i="0">
    <p>é«˜æ–¯æ¶ˆå…ƒç›®æ ‡ï¼šå°† A é€šè¿‡<span class="hl">è¡Œæ“ä½œ</span>å˜æˆä¸Šä¸‰è§’çŸ©é˜µ Uã€‚ç‚¹å‡»æŒ‰é’®é€æ­¥è§‚å¯Ÿï¼š</p>
    <div class="controls">
      <button class="btn" onclick="gaussStep(0)">åˆå§‹çŸ©é˜µ</button>
      <button class="btn sec" onclick="gaussStep(1)">ç¬¬ä¸€æ­¥ï¼šæ¶ˆå»ç¬¬1åˆ—</button>
      <button class="btn sec" onclick="gaussStep(2)">ç¬¬äºŒæ­¥ï¼šæ¶ˆå»ç¬¬2åˆ—</button>
    </div>
    <div id="gauss-out"></div>
  </div>
  <div class="tc" data-g="gauss" data-i="1">
    <p>é«˜æ–¯æ¶ˆå…ƒæ¯æ­¥è¡Œæ“ä½œç­‰ä»·äºå·¦ä¹˜ä¸€ä¸ª<span class="hl">ä¸‹ä¸‰è§’åˆç­‰çŸ©é˜µ</span>ï¼š</p>
    <div class="sf">
      <div class="sc"><div class="sn">1</div><h4>è¡Œæ“ä½œ = å·¦ä¹˜</h4><p>Ráµ¢ -= mÂ·Râ±¼ ç­‰ä»·äºå·¦ä¹˜ä¸‹ä¸‰è§’çŸ©é˜µ Eâ‚–</p></div>
      <div class="sc"><div class="sn">2</div><h4>æ¶ˆå…ƒå®Œæˆ</h4><p>Eâ‚‚Â·Eâ‚Â·A = U â†’ A = Eâ‚â»Â¹Â·Eâ‚‚â»Â¹Â·U</p></div>
      <div class="sc"><div class="sn">3</div><h4>ä¸‹ä¸‰è§’çš„é€†ä»æ˜¯ä¸‹ä¸‰è§’</h4><p>L = Eâ‚â»Â¹Â·Eâ‚‚â»Â¹ ä»æ˜¯ä¸‹ä¸‰è§’ï¼</p></div>
    </div>
    <div class="info"><strong>ğŸ’¡ æ ¸å¿ƒ</strong>æ¶ˆå…ƒä»ä¸Šåˆ°ä¸‹é€åˆ—æ¶ˆå»ä¸‹æ–¹å…ƒç´ ï¼Œå¤©ç„¶å¯¹åº”<span class="hl">ä¸‹ä¸‰è§’çŸ©é˜µ</span>ã€‚ç»“æœæ˜¯ Uï¼Œè®°å½•ä¹˜æ•°å¾— Lã€‚A=LÂ·U å°±æ˜¯é«˜æ–¯æ¶ˆå…ƒçš„ç›´æ¥äº§ç‰©ï¼</div>
  </div>
  <div class="tc" data-g="gauss" data-i="2">
    <div class="two-col">
      <div class="info green"><strong>âœ… æ•°å­¦ä¸Šå¯ä»¥</strong>å¯é€†çŸ©é˜µå¯åˆ†è§£ä¸º U'Â·L'ï¼Œå«åå‘LUåˆ†è§£ã€‚</div>
      <div class="info red"><strong>âŒ ä½†ä¸è‡ªç„¶</strong>ç›¸å½“äºä»ä¸‹å¾€ä¸Šæ¶ˆå…ƒï¼Œè¿åç›´è§‰ä¸”æ— æ ‡å‡†åº“æ”¯æŒã€‚</div>
    </div>
    <table class="ct">
      <tr><th>å¯¹æ¯”é¡¹</th><th>A = LÃ—U</th><th>A = U'Ã—L'</th></tr>
      <tr><td>æ¶ˆå…ƒæ–¹å‘</td><td>ä»ä¸Šåˆ°ä¸‹ï¼ˆè‡ªç„¶ï¼‰</td><td>ä»ä¸‹åˆ°ä¸Šï¼ˆé€†å‘ï¼‰</td></tr>
      <tr><td>è‡ªç„¶äº§ç‰©</td><td><span class="tag y">æ˜¯</span></td><td><span class="tag n">å¦</span></td></tr>
      <tr><td>æ ‡å‡†åº“æ”¯æŒ</td><td><span class="tag y">LAPACK</span></td><td><span class="tag n">å‡ ä¹æ²¡æœ‰</span></td></tr>
    </table>
  </div>
</div>

<!-- ===== 3 ===== -->
<div class="section">
  <span class="section-number">ç¬¬ä¸‰ç« </span>
  <h2>äº¤äº’å¼ 2Ã—2 LU åˆ†è§£</h2>
  <p>æ”¹å˜çŸ©é˜µå…ƒç´ ï¼Œå®æ—¶çœ‹åˆ° LU åˆ†è§£ç»“æœï¼š</p>
  <div class="controls">
    <div class="cg"><label>aâ‚â‚:</label><input type="number" id="a11" value="4" step="0.5"></div>
    <div class="cg"><label>aâ‚â‚‚:</label><input type="number" id="a12" value="3" step="0.5"></div>
    <div class="cg"><label>aâ‚‚â‚:</label><input type="number" id="a21" value="6" step="0.5"></div>
    <div class="cg"><label>aâ‚‚â‚‚:</label><input type="number" id="a22" value="3" step="0.5"></div>
  </div>
  <div id="lu2-display" class="matrix-display"></div>
  <div id="lu2-detail" class="cb"></div>
  <div id="lu2-info" class="info"></div>
</div>

<!-- ===== 4 ===== -->
<div class="section">
  <span class="section-number">ç¬¬å››ç« </span>
  <h2>ä¸‰è§’çŸ©é˜µ Ã— å‘é‡ = ä»€ä¹ˆå˜æ¢ï¼Ÿ</h2>
  <p>æ‹–åŠ¨æ»‘å—çœ‹ä¸‹ä¸‰è§’å’Œä¸Šä¸‰è§’çŸ©é˜µå¦‚ä½•å˜æ¢ä¸€ä¸ªæ­£æ–¹å½¢ï¼ˆå‰ªåˆ‡å˜æ¢ï¼Œé¢ç§¯ä¸å˜ï¼‰ï¼š</p>
  <div class="controls">
    <div class="cg"><label style="color:var(--lower-color)">ä¸‹ä¸‰è§’ m<sub>L</sub>:</label>
      <input type="range" id="shearL" min="-3" max="3" step="0.1" value="0">
      <span class="sv" id="shearL-val">0.0</span></div>
    <div class="cg"><label style="color:var(--upper-color)">ä¸Šä¸‰è§’ m<sub>U</sub>:</label>
      <input type="range" id="shearU" min="-3" max="3" step="0.1" value="0">
      <span class="sv" id="shearU-val">0.0</span></div>
    <button class="btn sec" id="triReset">é‡ç½®</button>
  </div>
  <div class="viz"><canvas id="triCanvas" width="700" height="380"></canvas></div>
  <div class="two-col">
    <div class="info"><strong style="color:var(--lower-color)">ä¸‹ä¸‰è§’ L çš„å˜æ¢</strong>L=[1,0; m,1] â†’ (x,y)â†’(x, mx+y)ã€‚x è½´ä¸å˜ï¼Œy æ–¹å‘å‰ªåˆ‡ã€‚det=1ã€‚</div>
    <div class="info blue"><strong style="color:var(--upper-color)">ä¸Šä¸‰è§’ U çš„å˜æ¢</strong>U=[1,m; 0,1] â†’ (x,y)â†’(x+my, y)ã€‚y è½´ä¸å˜ï¼Œx æ–¹å‘å‰ªåˆ‡ã€‚det=1ã€‚</div>
  </div>
</div>

<!-- ===== 5: DETERMINANT ===== -->
<div class="section">
  <span class="section-number">ç¬¬äº”ç«  Â· é‡ç‚¹</span>
  <h2>è¡Œå˜åˆ—å˜ï¼Œä¸ºä»€ä¹ˆè¡Œåˆ—å¼ä¸å˜ï¼Ÿâ€” å‡ ä½•äº¤äº’è¯æ˜</h2>
  <p>è¡Œåˆ—å¼ = åˆ—å‘é‡å¼ æˆçš„<span class="hl">å¹³è¡Œå››è¾¹å½¢æœ‰å‘é¢ç§¯</span>ã€‚ä¸‹é¢ç”¨ 2Ã—2 çŸ©é˜µæ¥äº¤äº’å¼å‡ ä½•è¯æ˜ï¼šæ‹–åŠ¨ k æ»‘å—ï¼Œè§‚å¯Ÿå¹³è¡Œå››è¾¹å½¢å¦‚ä½•å˜å½¢ä½†é¢ç§¯ä¸å˜ï¼</p>
  <div class="info green" style="margin-bottom:20px"><strong>ğŸ¯ ä¸‰ä¸ªæ ¸å¿ƒäº‹å®</strong>â‘  è¡Œæ“ä½œ Ráµ¢ += kÂ·Râ±¼ â†’ det ä¸å˜ â‘¡ åˆ—æ“ä½œ Cáµ¢ += kÂ·Câ±¼ â†’ det ä¸å˜ â‘¢ det(A) = det(Aáµ€)</div>

  <div class="viz" style="padding:0"><canvas id="detCanvas" width="700" height="520"></canvas></div>

  <div style="text-align:center;margin:16px 0">
    <div class="controls" style="justify-content:center">
      <button class="btn" id="dm-original">åŸå§‹çŸ©é˜µ</button>
      <button class="btn sec" id="dm-row">è¡Œæ“ä½œ Râ‚‚+=kÂ·Râ‚</button>
      <button class="btn blue" id="dm-col">åˆ—æ“ä½œ Câ‚‚+=kÂ·Câ‚</button>
      <button class="btn green" id="dm-transpose">è½¬ç½® Aáµ€</button>
    </div>
    <div class="controls" style="justify-content:center;margin-top:8px">
      <div class="cg"><label>k =</label>
        <input type="range" id="detK" min="-2" max="2" step="0.05" value="0">
        <span class="sv" id="detK-val">0.00</span></div>
      <div class="cg"><label>a:</label><input type="number" id="da" value="3" step="0.5" style="width:56px"></div>
      <div class="cg"><label>b:</label><input type="number" id="db" value="1" step="0.5" style="width:56px"></div>
      <div class="cg"><label>c:</label><input type="number" id="dc" value="1" step="0.5" style="width:56px"></div>
      <div class="cg"><label>d:</label><input type="number" id="dd" value="3" step="0.5" style="width:56px"></div>
    </div>
  </div>
  <div id="det-explain" class="info blue" style="min-height:70px"></div>

  <div style="margin-top:24px">
    <h3 style="font-size:1.1rem;margin-bottom:12px">ç›´è§‰è§£é‡Šï¼šä¸ºä»€ä¹ˆå‰ªåˆ‡ä¸æ”¹å˜é¢ç§¯ï¼Ÿ</h3>
    <div class="sf">
      <div class="sc"><div class="sn">1</div><h4>è¡Œæ“ä½œ = æ²¿åº•è¾¹æ¨</h4><p>åº•ä¸å˜ï¼Œé«˜ä¸å˜â†’é¢ç§¯ä¸å˜ã€‚å°±åƒæ¨ä¸€æ‘çº¸ï¼</p></div>
      <div class="sc"><div class="sn" style="background:var(--accent2)">2</div><h4>åˆ—æ“ä½œ = æ¢ä¸ªæ–¹å‘æ¨</h4><p>æ²¿å¦ä¸€æ¡è¾¹æ¨ï¼ŒåŒæ ·åº•é«˜ä¸å˜â†’é¢ç§¯ä¸å˜ã€‚</p></div>
      <div class="sc"><div class="sn" style="background:var(--accent3)">3</div><h4>è½¬ç½® det(A)=det(Aáµ€)</h4><p>è¡Œå˜åˆ—=è½¬ç½®ã€‚é¢ç§¯æ’ç­‰ï¼è¡Œåˆ—åœ¨è¡Œåˆ—å¼é¢å‰å®Œå…¨å¯¹ç§°ã€‚</p></div>
    </div>
  </div>
</div>

<!-- ===== 6 ===== -->
<div class="section">
  <span class="section-number">ç¬¬å…­ç« </span>
  <h2>LU åˆ†è§£è§£æ–¹ç¨‹ Ax = b</h2>
  <div class="sf">
    <div class="sc"><div class="sn">1</div><h4>åˆ†è§£ A=LU</h4><p>ä¸€æ¬¡åˆ†è§£ï¼Œåå¤ä½¿ç”¨</p></div>
    <div class="sc" style="border-color:var(--lower-color)"><div class="sn" style="background:var(--lower-color)">2</div><h4>å‰ä»£ Ly=b</h4><p>ä»ä¸Šå¾€ä¸‹é€ä¸ªæ±‚ y</p></div>
    <div class="sc" style="border-color:var(--upper-color)"><div class="sn" style="background:var(--upper-color)">3</div><h4>å›ä»£ Ux=y</h4><p>ä»ä¸‹å¾€ä¸Šé€ä¸ªæ±‚ x</p></div>
  </div>
  <div class="controls">
    <button class="btn solve-btn" data-s="0">é¢˜ç›®</button>
    <button class="btn sec solve-btn" data-s="1">æ­¥éª¤1: LUåˆ†è§£</button>
    <button class="btn sec solve-btn" data-s="2">æ­¥éª¤2: å‰ä»£æ±‚y</button>
    <button class="btn sec solve-btn" data-s="3">æ­¥éª¤3: å›ä»£æ±‚x</button>
  </div>
  <div id="solve-out" class="cb" style="min-height:180px"></div>
</div>

<!-- ===== 7 ===== -->
<div class="section">
  <span class="section-number">æ€»ç»“</span>
  <h2>LU åˆ†è§£å…¨æ™¯å›¾</h2>
  <div class="equation" style="font-size:1.4rem;padding:28px">
    <span class="A">A</span> = <span class="L">L</span> Â· <span class="U">U</span>
    <span style="color:var(--text-dim);font-size:0.78rem;display:block;margin-top:6px">ï¼ˆæ¶ˆå…ƒè¿‡ç¨‹çš„å¿ å®è®°å½•ï¼‰</span>
  </div>
  <div class="two-col">
    <div class="info"><strong>L â€” ä¸‹ä¸‰è§’çŸ©é˜µ</strong>è®°å½•ã€Œæ€ä¹ˆæ¶ˆçš„ã€ï¼Œå‡ ä½•ä¸Šæ˜¯å‘ä¸‹å‰ªåˆ‡ï¼Œå‰ä»£æ³•æ±‚è§£ Ly=b</div>
    <div class="info blue"><strong>U â€” ä¸Šä¸‰è§’çŸ©é˜µ</strong>è®°å½•ã€Œæ¶ˆå®Œçš„ç»“æœã€ï¼Œå‡ ä½•ä¸Šæ˜¯å‘å³å‰ªåˆ‡+ç¼©æ”¾ï¼Œå›ä»£æ³•æ±‚è§£ Ux=y</div>
  </div>
  <div class="info green"><strong>ä¸€å¥è¯</strong>LÃ—U æºäºé«˜æ–¯æ¶ˆå…ƒä»ä¸Šåˆ°ä¸‹ï¼›è¡Œåˆ—å¼ä¸å˜å› ä¸ºå‰ªåˆ‡ä¸æ”¹å˜é¢ç§¯ï¼›det(A)=det(Aáµ€) ä¿è¯è¡Œåˆ—å®Œå…¨å¯¹ç§°ã€‚</div>
</div>

</div>

<script>
function $(id){ return document.getElementById(id); }

// ============ TABS ============
document.querySelectorAll('.tabs').forEach(bar => {
  bar.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      const g = tab.dataset.g, i = tab.dataset.i;
      bar.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.i===i));
      const section = bar.closest('.section');
      section.querySelectorAll('.tc').forEach(c => c.classList.toggle('active', c.dataset.g===g && c.dataset.i===i));
    });
  });
});

// ============ GAUSS ============
const gaussData = [
  `<div class="gs act"><h4>åˆå§‹çŸ©é˜µ A</h4>
  <div class="matrix-display"><div class="matrix plain">
    <div class="matrix-row"><div class="matrix-cell">2</div><div class="matrix-cell">1</div><div class="matrix-cell">1</div></div>
    <div class="matrix-row"><div class="matrix-cell">4</div><div class="matrix-cell">3</div><div class="matrix-cell">3</div></div>
    <div class="matrix-row"><div class="matrix-cell">8</div><div class="matrix-cell">7</div><div class="matrix-cell">9</div></div>
  </div></div></div>`,

  `<div class="gs"><h4>åˆå§‹ A</h4></div>
  <div class="gs act"><h4>æ­¥éª¤1ï¼šRâ‚‚ -= 2Â·Râ‚ï¼ŒRâ‚ƒ -= 4Â·Râ‚</h4>
  <p style="font-size:0.84rem;color:var(--text-dim)">ä¹˜æ•° <span class="hl">lâ‚‚â‚=2, lâ‚ƒâ‚=4</span>ï¼ˆè®°å…¥Lï¼‰</p>
  <div class="matrix-display"><div class="matrix plain">
    <div class="matrix-row"><div class="matrix-cell">2</div><div class="matrix-cell">1</div><div class="matrix-cell">1</div></div>
    <div class="matrix-row"><div class="matrix-cell" style="color:var(--accent3)">0</div><div class="matrix-cell">1</div><div class="matrix-cell">1</div></div>
    <div class="matrix-row"><div class="matrix-cell" style="color:var(--accent3)">0</div><div class="matrix-cell">3</div><div class="matrix-cell">5</div></div>
  </div></div></div>`,

  `<div class="gs"><h4>æ­¥éª¤1 å®Œæˆ</h4></div>
  <div class="gs act"><h4>æ­¥éª¤2ï¼šRâ‚ƒ -= 3Â·Râ‚‚</h4>
  <p style="font-size:0.84rem;color:var(--text-dim)">ä¹˜æ•° <span class="hl">lâ‚ƒâ‚‚=3</span>ï¼ˆè®°å…¥Lï¼‰</p>
  <div class="matrix-display"><div><div class="matrix upper">
    <div class="matrix-row"><div class="matrix-cell">2</div><div class="matrix-cell">1</div><div class="matrix-cell">1</div></div>
    <div class="matrix-row"><div class="matrix-cell zero">0</div><div class="matrix-cell">1</div><div class="matrix-cell">1</div></div>
    <div class="matrix-row"><div class="matrix-cell zero">0</div><div class="matrix-cell zero">0</div><div class="matrix-cell">2</div></div>
  </div><div class="matrix-label ul">è¿™å°±æ˜¯ Uï¼</div></div></div>
  <div class="info green" style="margin-top:12px"><strong>âœ¨ åŒæ—¶å¾—åˆ° L</strong>
  æ¶ˆå…ƒä¹˜æ•° lâ‚‚â‚=2, lâ‚ƒâ‚=4, lâ‚ƒâ‚‚=3 â†’ å¡«å…¥ä¸‹ä¸‰è§’ï¼Œå¯¹è§’çº¿å¡«1 â†’ å¾—åˆ° Lï¼</div></div>`
];
function gaussStep(s){ $('gauss-out').innerHTML = gaussData[s]; }
gaussStep(0);

// ============ 2Ã—2 LU ============
function updateLU2() {
  const a=+$('a11').value, b=+$('a12').value, c=+$('a21').value, d=+$('a22').value;
  const R=v=>Math.round(v*1000)/1000;
  if(a===0){ $('lu2-display').innerHTML=''; $('lu2-detail').textContent='aâ‚â‚=0ï¼Œéœ€è¦PLUåˆ†è§£'; $('lu2-info').innerHTML='<strong>âš ï¸</strong>ä¸»å…ƒä¸ºé›¶'; return; }
  const l21=c/a, u11=a, u12=b, u22=d-l21*b;
  $('lu2-display').innerHTML=`
    <div><div class="matrix result"><div class="matrix-row"><div class="matrix-cell">${R(a)}</div><div class="matrix-cell">${R(b)}</div></div><div class="matrix-row"><div class="matrix-cell">${R(c)}</div><div class="matrix-cell">${R(d)}</div></div></div><div class="matrix-label rl">A</div></div>
    <div class="op-symbol">=</div>
    <div><div class="matrix lower"><div class="matrix-row"><div class="matrix-cell diag">1</div><div class="matrix-cell zero">0</div></div><div class="matrix-row"><div class="matrix-cell hi">${R(l21)}</div><div class="matrix-cell diag">1</div></div></div><div class="matrix-label ll">L</div></div>
    <div class="op-symbol">Ã—</div>
    <div><div class="matrix upper"><div class="matrix-row"><div class="matrix-cell hi">${R(u11)}</div><div class="matrix-cell hi">${R(u12)}</div></div><div class="matrix-row"><div class="matrix-cell zero">0</div><div class="matrix-cell hi">${R(u22)}</div></div></div><div class="matrix-label ul">U</div></div>`;
  $('lu2-detail').textContent=`lâ‚‚â‚ = ${R(c)}/${R(a)} = ${R(l21)}    uâ‚‚â‚‚ = ${R(d)} - ${R(l21)}Ã—${R(b)} = ${R(u22)}\néªŒè¯: LÃ—U = [${R(u11)}, ${R(u12)}; ${R(l21*u11)}, ${R(l21*u12+u22)}] âœ“`;
  const det=a*d-b*c;
  $('lu2-info').innerHTML=`<strong>ğŸ“Š è¡Œåˆ—å¼</strong>det(A) = ${R(det)} ï½œ det(L)Â·det(U) = 1Ã—${R(u11*u22)} = ${R(u11*u22)} âœ“`;
}
['a11','a12','a21','a22'].forEach(id=>$(id).addEventListener('input',updateLU2));
updateLU2();

// ============ TRI VIZ ============
function drawTriViz() {
  const c=$('triCanvas'), ctx=c.getContext('2d'), W=c.width, H=c.height;
  const mL=+$('shearL').value, mU=+$('shearU').value;
  $('shearL-val').textContent=mL.toFixed(1);
  $('shearU-val').textContent=mU.toFixed(1);
  ctx.clearRect(0,0,W,H);
  ctx.fillStyle='#e8ecf4'; ctx.fillRect(0,0,W,H);
  const cx=W/2, cy=H/2, s=60;
  const toS=(x,y)=>[cx+x*s, cy-y*s];

  ctx.strokeStyle='rgba(0,0,0,0.06)'; ctx.lineWidth=1;
  for(let i=-10;i<=10;i++){
    ctx.beginPath();ctx.moveTo(cx+i*s,0);ctx.lineTo(cx+i*s,H);ctx.stroke();
    ctx.beginPath();ctx.moveTo(0,cy+i*s);ctx.lineTo(W,cy+i*s);ctx.stroke();
  }
  ctx.strokeStyle='rgba(0,0,0,0.2)'; ctx.lineWidth=1.5;
  ctx.beginPath();ctx.moveTo(0,cy);ctx.lineTo(W,cy);ctx.stroke();
  ctx.beginPath();ctx.moveTo(cx,0);ctx.lineTo(cx,H);ctx.stroke();

  const sq=[[0,0],[1,0],[1,1],[0,1]];
  function drawPoly(pts,stroke,fill,lbl){
    ctx.beginPath(); let[px,py]=toS(pts[0][0],pts[0][1]);ctx.moveTo(px,py);
    for(let i=1;i<pts.length;i++){[px,py]=toS(pts[i][0],pts[i][1]);ctx.lineTo(px,py);}
    ctx.closePath();
    if(fill){ctx.fillStyle=fill;ctx.fill();}
    ctx.strokeStyle=stroke;ctx.lineWidth=2.5;ctx.stroke();
    if(lbl){ let mx=0,my=0;pts.forEach(p=>{mx+=p[0];my+=p[1]});mx/=pts.length;my/=pts.length;
      const[lx,ly]=toS(mx,my); ctx.fillStyle=stroke;ctx.font='bold 13px "JetBrains Mono"';ctx.textAlign='center';ctx.fillText(lbl,lx,ly+4);}
  }
  drawPoly(sq,'rgba(0,0,0,0.3)','rgba(0,0,0,0.04)','åŸå§‹');
  drawPoly(sq.map(([x,y])=>[x,mL*x+y]),'#c2660a','rgba(194,102,10,0.12)','Lå˜æ¢');
  drawPoly(sq.map(([x,y])=>[x+mU*y,y]),'#2556c4','rgba(37,86,196,0.12)','Uå˜æ¢');

  ctx.fillStyle='#c2660a';ctx.font='13px "JetBrains Mono"';ctx.textAlign='left';
  ctx.fillText(`L=[1,0; ${mL.toFixed(1)},1]  det=1`,10,20);
  ctx.fillStyle='#2556c4';ctx.fillText(`U=[1,${mU.toFixed(1)}; 0,1]  det=1`,10,38);
  ctx.fillStyle='#5a6580';ctx.font='12px "Noto Sans SC"';ctx.fillText('ä¸‰ä¸ªå½¢çŠ¶é¢ç§¯éƒ½ç›¸ç­‰=1',10,56);
}
$('shearL').addEventListener('input',drawTriViz);
$('shearU').addEventListener('input',drawTriViz);
$('triReset').addEventListener('click',()=>{$('shearL').value=0;$('shearU').value=0;drawTriViz();});
drawTriViz();

// ============ DET VIZ ============
let detMode = 'original';
['dm-original','dm-row','dm-col','dm-transpose'].forEach(id=>{
  $(id).addEventListener('click',()=>{ detMode=id.replace('dm-',''); drawDet(); });
});
$('detK').addEventListener('input', drawDet);
['da','db','dc','dd'].forEach(id=>$(id).addEventListener('input',drawDet));

function drawDet(){
  const c=$('detCanvas'), ctx=c.getContext('2d'), W=c.width, H=c.height;
  const k=+$('detK').value;
  const a=+$('da').value, b=+$('db').value, cc=+$('dc').value, d=+$('dd').value;
  $('detK-val').textContent=k.toFixed(2);

  ctx.clearRect(0,0,W,H);
  ctx.fillStyle='#e8ecf4'; ctx.fillRect(0,0,W,H);
  const cx=W/2, cy=H/2, sc=52;
  const toS=(x,y)=>[cx+x*sc, cy-y*sc];

  // grid
  ctx.strokeStyle='rgba(0,0,0,0.05)'; ctx.lineWidth=1;
  for(let i=-10;i<=10;i++){
    ctx.beginPath();ctx.moveTo(cx+i*sc,0);ctx.lineTo(cx+i*sc,H);ctx.stroke();
    ctx.beginPath();ctx.moveTo(0,cy+i*sc);ctx.lineTo(W,cy+i*sc);ctx.stroke();
  }
  ctx.strokeStyle='rgba(0,0,0,0.18)'; ctx.lineWidth=1.5;
  ctx.beginPath();ctx.moveTo(0,cy);ctx.lineTo(W,cy);ctx.stroke();
  ctx.beginPath();ctx.moveTo(cx,0);ctx.lineTo(cx,H);ctx.stroke();
  ctx.fillStyle='rgba(0,0,0,0.25)';ctx.font='12px "JetBrains Mono"';ctx.textAlign='center';
  ctx.fillText('x',W-14,cy-6); ctx.fillText('y',cx+10,14);

  const origC1=[a,cc], origC2=[b,d], origDet=a*d-b*cc;
  let c1=[...origC1], c2=[...origC2], modeLabel='';

  if(detMode==='row'){ c1=[a,cc+k*a]; c2=[b,d+k*b]; modeLabel=`è¡Œæ“ä½œ Râ‚‚+=${k.toFixed(1)}Â·Râ‚`; }
  else if(detMode==='col'){ c1=[a,cc]; c2=[b+k*a,d+k*cc]; modeLabel=`åˆ—æ“ä½œ Câ‚‚+=${k.toFixed(1)}Â·Câ‚`; }
  else if(detMode==='transpose'){ c1=[a,b]; c2=[cc,d]; modeLabel='è½¬ç½® Aáµ€'; }
  else { modeLabel='åŸå§‹çŸ©é˜µ'; }

  const curDet=c1[0]*c2[1]-c1[1]*c2[0];

  // draw original (dashed) if not original
  if(detMode!=='original'){
    drawParallelogram(ctx,toS,origC1,origC2,'rgba(0,0,0,0.12)','rgba(0,0,0,0.03)',true);
    const cmx=(origC1[0]+origC2[0])/2, cmy=(origC1[1]+origC2[1])/2;
    const[lx,ly]=toS(cmx,cmy);
    ctx.fillStyle='rgba(0,0,0,0.2)';ctx.font='11px "Noto Sans SC"';ctx.textAlign='center';ctx.fillText('åŸå§‹',lx,ly+4);
  }

  // current parallelogram
  const colors={original:['#0e7a58','rgba(14,122,88,0.13)'],row:['#c2660a','rgba(194,102,10,0.13)'],col:['#2556c4','rgba(37,86,196,0.13)'],transpose:['#0e7a58','rgba(14,122,88,0.13)']};
  const[mS,mF]=colors[detMode];
  drawParallelogram(ctx,toS,c1,c2,mS,mF,false);

  // hatch fill
  ctx.save();
  const pts=[[0,0],c1,[c1[0]+c2[0],c1[1]+c2[1]],c2];
  ctx.beginPath(); let[sx,sy]=toS(pts[0][0],pts[0][1]);ctx.moveTo(sx,sy);
  for(let i=1;i<4;i++){[sx,sy]=toS(pts[i][0],pts[i][1]);ctx.lineTo(sx,sy);}
  ctx.closePath();ctx.clip();
  ctx.strokeStyle=mS+'22'; ctx.lineWidth=1;
  for(let i=-30;i<40;i++){ctx.beginPath();ctx.moveTo(cx+i*14,0);ctx.lineTo(cx+i*14-H,H);ctx.stroke();}
  ctx.restore();

  // vectors
  drawVec(ctx,toS,c1,'#c2660a',`câ‚(${c1[0].toFixed(1)},${c1[1].toFixed(1)})`);
  drawVec(ctx,toS,c2,'#2556c4',`câ‚‚(${c2[0].toFixed(1)},${c2[1].toFixed(1)})`);

  // height line for row/col
  if(detMode==='row' && Math.abs(k)>0.05){
    const len2=c1[0]*c1[0]+c1[1]*c1[1]; if(len2>0){
    const dot=(c2[0]*c1[0]+c2[1]*c1[1])/len2;
    const fx=dot*c1[0], fy=dot*c1[1];
    drawDashedLine(ctx,toS,c2[0],c2[1],fx,fy,'#c2660a');
    const[mx,my]=toS((c2[0]+fx)/2,(c2[1]+fy)/2);
    ctx.fillStyle='#c2660a';ctx.font='bold 15px "JetBrains Mono"';ctx.textAlign='center';ctx.fillText('h',mx-14,my);
    // also show the foot is the same
    drawDashedLine(ctx,toS,origC2[0],origC2[1],
      ((origC2[0]*origC1[0]+origC2[1]*origC1[1])/(origC1[0]*origC1[0]+origC1[1]*origC1[1]))*origC1[0],
      ((origC2[0]*origC1[0]+origC2[1]*origC1[1])/(origC1[0]*origC1[0]+origC1[1]*origC1[1]))*origC1[1],
      'rgba(0,0,0,0.15)');
    }}
  if(detMode==='col' && Math.abs(k)>0.05){
    const len2=c1[0]*c1[0]+c1[1]*c1[1]; if(len2>0){
    const dot=(c2[0]*c1[0]+c2[1]*c1[1])/len2;
    const fx=dot*c1[0], fy=dot*c1[1];
    drawDashedLine(ctx,toS,c2[0],c2[1],fx,fy,'#2556c4');
    const[mx,my]=toS((c2[0]+fx)/2,(c2[1]+fy)/2);
    ctx.fillStyle='#2556c4';ctx.font='bold 15px "JetBrains Mono"';ctx.textAlign='center';ctx.fillText('h',mx+14,my);
    }}

  // det display
  ctx.fillStyle=mS;ctx.font='bold 22px "JetBrains Mono"';ctx.textAlign='left';
  ctx.fillText(`det = ${curDet.toFixed(2)}`,14,32);
  const same=Math.abs(curDet-origDet)<0.01;
  if(detMode!=='original'){
    ctx.fillStyle='rgba(0,0,0,0.35)';ctx.font='14px "JetBrains Mono"';ctx.fillText(`åŸå§‹ det = ${origDet.toFixed(2)}`,14,54);
    ctx.fillStyle=same?'#0e7a58':'#c42b2b';ctx.font='bold 16px "Noto Sans SC"';
    ctx.fillText(same?'âœ… é¢ç§¯ä¸å˜ï¼det æ’ç­‰ï¼':'âš  é¢ç§¯å˜äº†',14,78);
    ctx.fillStyle='#1a2236';ctx.font='13px "JetBrains Mono"';ctx.fillText(modeLabel,14,98);
  } else {
    ctx.fillStyle='#1a2236';ctx.font='13px "JetBrains Mono"';ctx.fillText(modeLabel,14,54);
    ctx.fillStyle='#5a6580';ctx.font='12px "Noto Sans SC"';ctx.fillText('â† åˆ‡æ¢æ“ä½œæ¨¡å¼å¹¶æ‹–åŠ¨ k æ»‘å—æ¥è§‚å¯Ÿ',14,74);
  }

  // explanation
  const el=$('det-explain');
  if(detMode==='original') el.innerHTML=`<strong>ğŸ“ A=[${a},${b}; ${cc},${d}]</strong>åˆ—å‘é‡ câ‚=(${a},${cc}), câ‚‚=(${b},${d}) å›´æˆå¹³è¡Œå››è¾¹å½¢ã€‚<strong>æœ‰å‘é¢ç§¯ = det = ${origDet.toFixed(2)}</strong>ã€‚åˆ‡æ¢æ¨¡å¼å¹¶æ‹–åŠ¨ k æ¥è§‚å¯Ÿï¼`;
  else if(detMode==='row') el.innerHTML=`<strong>ğŸ“ è¡Œæ“ä½œ Râ‚‚ += ${k.toFixed(2)}Â·Râ‚</strong>æŠŠä¸¤ä¸ªåˆ—å‘é‡çš„ç¬¬äºŒä¸ªåˆ†é‡å„åŠ  k å€çš„ç¬¬ä¸€ä¸ªåˆ†é‡ã€‚æ•ˆæœæ˜¯æ²¿ câ‚ æ–¹å‘ã€Œæ¨ã€câ‚‚ã€‚è™šçº¿ h æ˜¯ câ‚‚ åˆ° câ‚ çš„<strong>å‚ç›´è·ç¦»ï¼ˆé«˜ï¼‰</strong>ï¼Œå®ƒ<strong>å§‹ç»ˆä¸å˜</strong>ã€‚åº•ä¸å˜Ã—é«˜ä¸å˜ â†’ <strong>é¢ç§¯ä¸å˜ â†’ det=${curDet.toFixed(2)} âœ“</strong>`;
  else if(detMode==='col') el.innerHTML=`<strong>ğŸ“ åˆ—æ“ä½œ Câ‚‚ += ${k.toFixed(2)}Â·Câ‚</strong>æŠŠ câ‚‚ åŠ ä¸Š k å€çš„ câ‚ã€‚câ‚‚ æ²¿ câ‚ æ–¹å‘æ»‘åŠ¨ï¼Œåˆ° câ‚ çš„å‚ç›´è·ç¦» h <strong>ä¸å˜</strong>ã€‚åº•Ã—é«˜ä¸å˜ â†’ <strong>é¢ç§¯ä¸å˜ â†’ det=${curDet.toFixed(2)} âœ“</strong>ã€‚è¡Œæ“ä½œå’Œåˆ—æ“ä½œå¯¹ det æ•ˆæœå®Œå…¨ä¸€è‡´ï¼`;
  else el.innerHTML=`<strong>ğŸ“ è½¬ç½® Aáµ€=[${a},${cc}; ${b},${d}]</strong>è¡Œå˜åˆ—ã€‚å¹³è¡Œå››è¾¹å½¢ç¿»è½¬äº†ï¼Œä½†é¢ç§¯æ’ç­‰ã€‚<strong>det(Aáµ€)=${curDet.toFixed(2)} = det(A)=${origDet.toFixed(2)} âœ…</strong>ã€‚è¿™å°±æ˜¯ã€Œè¡Œå˜åˆ—å˜è¡Œåˆ—å¼ä¸å˜ã€çš„æ ¹æœ¬åŸå› ï¼šdet(A) â‰¡ det(Aáµ€)ã€‚`;
}

function drawParallelogram(ctx,toS,c1,c2,stroke,fill,dashed){
  const pts=[[0,0],c1,[c1[0]+c2[0],c1[1]+c2[1]],c2];
  ctx.beginPath(); let[sx,sy]=toS(pts[0][0],pts[0][1]);ctx.moveTo(sx,sy);
  for(let i=1;i<4;i++){[sx,sy]=toS(pts[i][0],pts[i][1]);ctx.lineTo(sx,sy);}
  ctx.closePath();
  ctx.fillStyle=fill;ctx.fill();
  if(dashed)ctx.setLineDash([6,4]);
  ctx.strokeStyle=stroke;ctx.lineWidth=dashed?1.5:2.5;ctx.stroke();
  if(dashed)ctx.setLineDash([]);
}

function drawVec(ctx,toS,v,color,lbl){
  const[ex,ey]=toS(v[0],v[1]),[ox,oy]=toS(0,0);
  ctx.beginPath();ctx.moveTo(ox,oy);ctx.lineTo(ex,ey);
  ctx.strokeStyle=color;ctx.lineWidth=3;ctx.stroke();
  const ang=Math.atan2(oy-ey,ex-ox);
  ctx.beginPath();ctx.moveTo(ex,ey);
  ctx.lineTo(ex-14*Math.cos(ang-0.3),ey+14*Math.sin(ang-0.3));
  ctx.lineTo(ex-14*Math.cos(ang+0.3),ey+14*Math.sin(ang+0.3));
  ctx.closePath();ctx.fillStyle=color;ctx.fill();
  ctx.font='bold 12px "JetBrains Mono"';ctx.textAlign='left';ctx.fillStyle=color;
  ctx.fillText(lbl,ex+10,ey-8);
}

function drawDashedLine(ctx,toS,x1,y1,x2,y2,color){
  const[sx1,sy1]=toS(x1,y1),[sx2,sy2]=toS(x2,y2);
  ctx.setLineDash([4,3]);ctx.strokeStyle=color;ctx.lineWidth=2;
  ctx.beginPath();ctx.moveTo(sx1,sy1);ctx.lineTo(sx2,sy2);ctx.stroke();
  ctx.setLineDash([]);
  // right angle marker
  const dx=sx2-sx1,dy=sy2-sy1,len=Math.sqrt(dx*dx+dy*dy);
  if(len>15){
    const nx=dx/len*10,ny=dy/len*10;
    const px=-ny,py=nx;
    ctx.beginPath();ctx.moveTo(sx2+nx,sy2+ny);ctx.lineTo(sx2+nx+px,sy2+ny+py);ctx.lineTo(sx2+px,sy2+py);
    ctx.strokeStyle=color;ctx.lineWidth=1.5;ctx.stroke();
  }
}

drawDet();

// ============ SOLVE ============
const solveData=[
  `<strong>æ±‚è§£ Ax = b</strong>\n\nA = [2  1  1]    b = [ 4]\n    [4  3  3]        [10]\n    [8  7  9]        [24]\n\nç›®æ ‡ï¼šæ‰¾åˆ° x ä½¿å¾— Ax = b`,
  `<strong>æ­¥éª¤1ï¼šA = LU åˆ†è§£</strong>\n\nL = [<span style="color:var(--lower-color)">1  0  0</span>]    U = [<span style="color:var(--upper-color)">2  1  1</span>]\n    [<span style="color:var(--lower-color)">2  1  0</span>]        [<span style="color:var(--upper-color)">0  1  1</span>]\n    [<span style="color:var(--lower-color)">4  3  1</span>]        [<span style="color:var(--upper-color)">0  0  2</span>]\n\nAx=b â†’ LUx=bï¼Œä»¤ y=Uxï¼Œåˆ™ Ly=b`,
  `<strong>æ­¥éª¤2ï¼šå‰ä»£æ³• Ly=b</strong>\n\n<span style="color:var(--accent3)">ä»ä¸Šå¾€ä¸‹ï¼š</span>\nyâ‚ = 4\n2Â·4 + yâ‚‚ = 10 â†’ yâ‚‚ = <strong style="color:var(--accent3)">2</strong>\n4Â·4 + 3Â·2 + yâ‚ƒ = 24 â†’ yâ‚ƒ = <strong style="color:var(--accent3)">2</strong>\n\ny = [4, 2, 2]áµ€`,
  `<strong>æ­¥éª¤3ï¼šå›ä»£æ³• Ux=y</strong>\n\n<span style="color:var(--accent3)">ä»ä¸‹å¾€ä¸Šï¼š</span>\n2Â·xâ‚ƒ = 2 â†’ xâ‚ƒ = <strong style="color:var(--accent3)">1</strong>\nxâ‚‚ + 1 = 2 â†’ xâ‚‚ = <strong style="color:var(--accent3)">1</strong>\n2Â·xâ‚ + 1 + 1 = 4 â†’ xâ‚ = <strong style="color:var(--accent3)">1</strong>\n\n<strong style="color:var(--accent)">âœ¨ x = [1, 1, 1]áµ€</strong>\néªŒè¯: AÂ·x = [4,10,24]áµ€ = b âœ…`
];
document.querySelectorAll('.solve-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{ $('solve-out').innerHTML=solveData[+btn.dataset.s]; });
});
$('solve-out').innerHTML=solveData[0];
</script>
</body>
</html>
